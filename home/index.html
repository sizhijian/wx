<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <base href="{$base_url}">
		<link rel="stylesheet" type="text/css" href="{$static_url}css/reset.css" />
		<link rel="stylesheet" type="text/css" href="{$static_url}css/style.css" />
		<script src="{$static_url}js/jquery.min.js"></script>
		<script src="{$static_url}js/fastclick.js" type="text/javascript" charset="utf-8"></script>
        <script src="{$static_url}js/jweixin-1.0.0.js" type="text/javascript"></script>
		<title>商家</title>
	</head>
	<body>
		<div id="result" style="margin:20px"></div>
        <button type="button" id="scan" style="margin:20px;padding:0 20px;height:32px;background-color:#fc0;color:#fff">扫码</button>
	<script type="text/javascript">
    //全局变量
    var _appId = '{$signPackage.appId}';
    var _timestamp = '{$signPackage.timestamp}';
    var _nonceStr = '{$signPackage.nonceStr}';
    var _signature = '{$signPackage.signature}';
    </script> 
    {literal} 
    <script type="text/javascript">
    wx.config({
        debug: false,
        appId: _appId,
        timestamp: _timestamp,
        nonceStr: _nonceStr,
        signature: _signature,
        jsApiList: [
            'scanQRCode'
        ]
    });
    
    wx.ready(function() {
        document.querySelector('#scan').onclick = function () {
            wx.scanQRCode({
				needResult: 1,
				desc: 'scanQRCode desc',
				success: function (res) {
					$('#result').append('<p>' + res.resultStr + '</p>');
				}
			});
        };
    });
    </script> 
    {/literal}
    </body>
</html>
